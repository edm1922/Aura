import { Question } from '@/types/test'

export const questions: Question[] = [
  {
    id: 'q1',
    text: 'I enjoy trying new and different things.',
    trait: 'openness',
    weight: 1,
    options: [
      { value: 1, text: 'Strongly Disagree' },
      { value: 2, text: 'Disagree' },
      { value: 3, text: 'Neutral' },
      { value: 4, text: 'Agree' },
      { value: 5, text: 'Strongly Agree' },
    ],
  },
  {
    id: 'q2',
    text: 'I am usually well-prepared for my tasks and responsibilities.',
    trait: 'conscientiousness',
    weight: 1,
    options: [
      { value: 1, text: 'Strongly Disagree' },
      { value: 2, text: 'Disagree' },
      { value: 3, text: 'Neutral' },
      { value: 4, text: 'Agree' },
      { value: 5, text: 'Strongly Agree' },
    ],
  },
  {
    id: 'q3',
    text: 'I feel energized when spending time with others.',
    trait: 'extraversion',
    weight: 1,
    options: [
      { value: 1, text: 'Strongly Disagree' },
      { value: 2, text: 'Disagree' },
      { value: 3, text: 'Neutral' },
      { value: 4, text: 'Agree' },
      { value: 5, text: 'Strongly Agree' },
    ],
  },
  {
    id: 'q4',
    text: 'I am sympathetic and caring towards others.',
    trait: 'agreeableness',
    weight: 1,
    options: [
      { value: 1, text: 'Strongly Disagree' },
      { value: 2, text: 'Disagree' },
      { value: 3, text: 'Neutral' },
      { value: 4, text: 'Agree' },
      { value: 5, text: 'Strongly Agree' },
    ],
  },
  {
    id: 'q5',
    text: 'I often feel anxious or worried.',
    trait: 'neuroticism',
    weight: 1,
    options: [
      { value: 1, text: 'Strongly Disagree' },
      { value: 2, text: 'Disagree' },
      { value: 3, text: 'Neutral' },
      { value: 4, text: 'Agree' },
      { value: 5, text: 'Strongly Agree' },
    ],
  },
  {
    id: 'q6',
    text: 'I have a vivid imagination.',
    trait: 'openness',
    weight: 1,
    options: [
      { value: 1, text: 'Strongly Disagree' },
      { value: 2, text: 'Disagree' },
      { value: 3, text: 'Neutral' },
      { value: 4, text: 'Agree' },
      { value: 5, text: 'Strongly Agree' },
    ],
  },
  {
    id: 'q7',
    text: 'I pay attention to details.',
    trait: 'conscientiousness',
    weight: 1,
    options: [
      { value: 1, text: 'Strongly Disagree' },
      { value: 2, text: 'Disagree' },
      { value: 3, text: 'Neutral' },
      { value: 4, text: 'Agree' },
      { value: 5, text: 'Strongly Agree' },
    ],
  },
  {
    id: 'q8',
    text: 'I start conversations with new people easily.',
    trait: 'extraversion',
    weight: 1,
    options: [
      { value: 1, text: 'Strongly Disagree' },
      { value: 2, text: 'Disagree' },
      { value: 3, text: 'Neutral' },
      { value: 4, text: 'Agree' },
      { value: 5, text: 'Strongly Agree' },
    ],
  },
  {
    id: 'q9',
    text: 'I believe in helping others.',
    trait: 'agreeableness',
    weight: 1,
    options: [
      { value: 1, text: 'Strongly Disagree' },
      { value: 2, text: 'Disagree' },
      { value: 3, text: 'Neutral' },
      { value: 4, text: 'Agree' },
      { value: 5, text: 'Strongly Agree' },
    ],
  },
  {
    id: 'q10',
    text: 'I get stressed easily.',
    trait: 'neuroticism',
    weight: 1,
    options: [
      { value: 1, text: 'Strongly Disagree' },
      { value: 2, text: 'Disagree' },
      { value: 3, text: 'Neutral' },
      { value: 4, text: 'Agree' },
      { value: 5, text: 'Strongly Agree' },
    ],
  },
  {
    id: 'q11',
    text: 'I enjoy thinking about abstract concepts.',
    trait: 'openness',
    weight: 1,
    options: [
      { value: 1, text: 'Strongly Disagree' },
      { value: 2, text: 'Disagree' },
      { value: 3, text: 'Neutral' },
      { value: 4, text: 'Agree' },
      { value: 5, text: 'Strongly Agree' },
    ],
  },
  {
    id: 'q12',
    text: 'I follow a schedule and stick to it.',
    trait: 'conscientiousness',
    weight: 1,
    options: [
      { value: 1, text: 'Strongly Disagree' },
      { value: 2, text: 'Disagree' },
      { value: 3, text: 'Neutral' },
      { value: 4, text: 'Agree' },
      { value: 5, text: 'Strongly Agree' },
    ],
  },
  {
    id: 'q13',
    text: 'I prefer being in groups rather than being alone.',
    trait: 'extraversion',
    weight: 1,
    options: [
      { value: 1, text: 'Strongly Disagree' },
      { value: 2, text: 'Disagree' },
      { value: 3, text: 'Neutral' },
      { value: 4, text: 'Agree' },
      { value: 5, text: 'Strongly Agree' },
    ],
  },
  {
    id: 'q14',
    text: 'I try to understand how others feel.',
    trait: 'agreeableness',
    weight: 1,
    options: [
      { value: 1, text: 'Strongly Disagree' },
      { value: 2, text: 'Disagree' },
      { value: 3, text: 'Neutral' },
      { value: 4, text: 'Agree' },
      { value: 5, text: 'Strongly Agree' },
    ],
  },
  {
    id: 'q15',
    text: 'I worry about things that might go wrong.',
    trait: 'neuroticism',
    weight: 1,
    options: [
      { value: 1, text: 'Strongly Disagree' },
      { value: 2, text: 'Disagree' },
      { value: 3, text: 'Neutral' },
      { value: 4, text: 'Agree' },
      { value: 5, text: 'Strongly Agree' },
    ],
  }
]

export function getQuestions(): Question[] {
  return questions
}

export function getRandomQuestions(count: number): Question[] {
  const shuffled = [...questions].sort(() => 0.5 - Math.random())
  return shuffled.slice(0, count)
}

export function calculateTraitScores(answers: { questionId: string; value: number }[]): {
  [key: string]: number
} {
  const traitScores: { [key: string]: { sum: number; count: number } } = {
    openness: { sum: 0, count: 0 },
    conscientiousness: { sum: 0, count: 0 },
    extraversion: { sum: 0, count: 0 },
    agreeableness: { sum: 0, count: 0 },
    neuroticism: { sum: 0, count: 0 },
  }

  answers.forEach((answer) => {
    const question = questions.find((q) => q.id === answer.questionId)
    if (question) {
      const trait = question.trait
      traitScores[trait].sum += answer.value * question.weight
      traitScores[trait].count += 1
    }
  })

  return Object.entries(traitScores).reduce((acc, [trait, { sum, count }]) => {
    acc[trait] = count > 0 ? sum / count : 0
    return acc
  }, {} as { [key: string]: number })
}